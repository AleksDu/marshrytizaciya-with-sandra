(this["webpackJsonpmarshrytizaciya-with-sandra"]=this["webpackJsonpmarshrytizaciya-with-sandra"]||[]).push([[6],{38:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r(31),n=r(0),c=function(e,t){var r=Object(n.useState)((function(){var r;return null!==(r=JSON.parse(localStorage.getItem(e)))&&void 0!==r?r:t})),c=Object(a.a)(r,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){localStorage.setItem(e,JSON.stringify(s))}),[e,s]),[s,i]}},85:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));var a=r(31),n=r(0),c=r(1);function s(e){var t=e.getSearchValues,r=Object(n.useState)(""),s=Object(a.a)(r,2),i=s[0],u=s[1],o=Object(n.useState)(5),h=Object(a.a)(o,2),l=h[0],p=h[1],j=function(e){var t=e.target,r=t.name,a=t.value;switch(r){case"searchValue":u(a);break;case"perPage":p(a)}};return Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("BEFORE FETCH",i,l),t(i,l),u("")},children:[Object(c.jsx)("input",{type:"text",name:"searchValue",value:i,onChange:j,placeholder:"Value"}),Object(c.jsx)("input",{type:"number",name:"perPage",value:l,onChange:j,placeholder:"how many results?"}),Object(c.jsx)("button",{type:"submit",children:"search"})]})}var i=r(39),u=r(52),o=r.n(u),h=r(54),l=r(34),p=r(35),j=r(55),b=r.n(j),g=function(){function e(t,r){Object(l.a)(this,e),this.base_url=t,this.api_key=r,this._searchQuery="",this._page=1,this._perPage=5,this.endPoint=""}return Object(p.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"perPage",get:function(){return this._perPage},set:function(e){return this._perPage=e}},{key:"searchPhotos",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t,r,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.a.defaults.baseURL=this.base_url,b.a.defaults.headers.common.Authorization=this.api_key,this.endPoint="search",console.log("searchQuery",this.searchQuery,"page",this.page,"perPage",this.perPage),t="?query=".concat(this.searchQuery,"&page=").concat(this.page,"&per_page=").concat(this.perPage),r=this.endPoint+t,e.prev=6,e.next=9,b.a.get(r);case 9:return a=e.sent,n=a.data.photos,e.abrupt("return",n);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",e.t0.message);case 17:case"end":return e.stop()}}),e,this,[[6,14]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),f=r(38),O=r(7),d=new g("https://api.pexels.com/v1/","563492ad6f91700001000001390f9fee0a794c1182a72e49e0e0eae2");function y(e){var t=e.searchValue,r=e.perPage,s=Object(f.a)("pexelImages",[]),u=Object(a.a)(s,2),o=u[0],h=u[1],l=Object(n.useState)("init"),p=Object(a.a)(l,2),j=p[0],b=p[1];Object(n.useEffect)((function(){t.trim()&&(b("pending"),d.resetPage(),d.searchQuery=t,d.perPage=r,d.searchPhotos().then((function(e){b("success"),h(e)})).catch((function(e){console.log(e),b("error")})))}),[t,r,h]);return"init"===j?Object(c.jsx)("h1",{children:"Hello! Search something"}):"pending"===j?Object(c.jsx)("h1",{children:"Wait please!"}):"success"===j?(console.log("success",o),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("ul",{style:{display:"flex",flexFlow:"row wrap"},children:o.length>0&&o.map((function(e){return Object(c.jsx)("li",{children:Object(c.jsx)(O.b,{to:"/pexels/".concat(e.id),children:Object(c.jsx)("img",{src:e.src.tiny,alt:e.photographer})})},e.id)}))}),Object(c.jsx)("button",{type:"button",onClick:function(){d.page=1,d.searchPhotos().then((function(e){h((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e))})),console.log("setSearchResults",e),b("success")})).catch((function(e){b("error")}))},children:"load more"})]})):"error"===j?Object(c.jsx)("h1",{children:"ALARMA!!!"}):void 0}function m(e){var t=e.title,r=Object(n.useState)(""),i=Object(a.a)(r,2),u=i[0],o=i[1],h=Object(n.useState)(5),l=Object(a.a)(h,2),p=l[0],j=l[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{children:t}),Object(c.jsx)(s,{getSearchValues:function(e,t){o(e),j(t)}}),Object(c.jsx)(y,{searchValue:u,perPage:p})]})}}}]);
//# sourceMappingURL=6.94bd5d5f.chunk.js.map